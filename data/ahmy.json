{"name":"ahmy","title":"2012-10-15 1st","description":"<div class=\"markdown\"><p>&#x4E0A;&#x304B;&#x3089;&#x30AA;&#x30EA;&#x30B8;&#x30CA;&#x30EB;&#x3001;CSS filter &#x304B;&#x3051;&#x305F;&#x306E;&#x3001;<a href=\"http://html2canvas.hertzen.com/\">html2canvas</a> &#x3057;&#x305F;&#x306E;&#x3092; <a href=\"http://jsdo.it/xl1/2Ckz\">http://jsdo.it/xl1/2Ckz</a> &#x3067;&#x51E6;&#x7406;&#x3057;&#x305F;&#x306E;</p>\n\n<h3>2013/9/26 &#x66F4;&#x65B0;</h3>\n\n<p>&#x3069;&#x3046;&#x3082;&#x3001;Chrome dev 31 &#x3042;&#x305F;&#x308A;&#x3067;&#x3001;&#x30A4;&#x30F3;&#x30E9;&#x30A4;&#x30F3;&#x3067; <code>-webkit-filter: custom()</code> &#x6307;&#x5B9A;&#x3059;&#x308B;&#x3068;&#x52B9;&#x304D;&#x3065;&#x3089;&#x3044;&#x69D8;&#x5B50;&#xFF08;&#x4E00;&#x5EA6;&#x30B3;&#x30F3;&#x30D1;&#x30A4;&#x30EB;&#x3055;&#x308C;&#x308B;&#x3068;&#x305D;&#x306E;&#x5F8C;&#x306F;&#x3046;&#x307E;&#x304F;&#x3044;&#x304F;&#x3088;&#x3046;&#x306A;&#x6C17;&#x304C;&#x3059;&#x308B;&#xFF09;&#x3002;\n&#x305D;&#x306E;&#x305F;&#x3081; <code>&lt;style&gt;</code> &#x8981;&#x7D20;&#x5DEE;&#x3057;&#x8FBC;&#x3080;&#x3088;&#x3046;&#x306B;&#x5909;&#x66F4;&#x3057;&#x305F;</p>\n</div>","libraries":["/njf/mFlj","/xl1/eHqL","/xl1/2Ckz"],"js":{"language":"coffeescript","content":"$ = (id) -> document.getElementById(id)\n\ncreateURL = (text) -> URL.createObjectURL(new Blob [text], type: 'text/plain')\n\naddCSS = (text) ->\n    style = document.createElement('style')\n    style.textContent = text\n    document.head.appendChild(style)\n\nmain = ->\n    vsh = $('vshader').textContent\n    fsh = $('fshader').textContent\n    vurl = createURL(vsh)\n    furl = createURL(fsh)\n    addCSS \"#filtered { -webkit-filter: custom(url('#{vurl}') mix(url('#{furl}') normal source-atop)); }\"\n    \n    copy = $('target').cloneNode(true)\n    copy.setAttribute('id', 'filtered')\n    document.body.insertBefore(copy, $('dest'))\n    \n    cfgl = (new CustomFilterGL $('dest'), 450, 135).shader(vsh, fsh, true).mesh()\n    html2canvas [$('target')], onrendered: (canv) ->\n        cfgl.source(canv).draw()\n\nmain()"},"html":{"language":"html","content":"<script type=\"x-shader/x-vertex\" id=\"vshader\">\nattribute vec4 a_position;\nuniform mat4 u_projectionMatrix;\n\nvoid main(){\n  gl_Position = u_projectionMatrix * a_position;\n}\n</script>\n<script type=\"x-shader/x-fragment\" id=\"fshader\">\nprecision mediump float;\n\nvoid main(){\n  css_MixColor = vec4(1.0, 0.7, 0.4, 0.2);\n  css_ColorMatrix = mat4(\n    1.0, 0.0, 0.0, 0.0,\n    0.0, 0.7, 0.0, 0.0,\n    1.0, 0.0, 0.4, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n}\n</script>\n\n<div id=\"target\" class=\"original\">\n    <h2>Lorem ipsum dolor sit amet</h2>\n    <ul>\n    \t<li>consectetur adipisicing elit\n    \t<li>ed do eiusmod tempor incididunt ut labore\n    \t<li>Ut enim ad minim veniam, quis nostrud exercitation\n    \t<li>laboris nisi ut aliquip ex ea commodo consequat\n    </ul>\n</div>\n<div id=\"dest\"></div>"},"css":{"language":"css","content":".original { width: 450px; height: 135px; }\nli:nth-of-type(1) { color: red; }\nli:nth-of-type(2) { color: blue; background: yellow; }\nli:nth-of-type(3) { background: lime; }\nli:nth-of-type(4) { color: magenta; background: cyan; }"},"published":"2013-09-26T04:01:01"}