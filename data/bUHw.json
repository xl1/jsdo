{"name":"bUHw","title":"SVG girl with player UI","description":"&#x30D7;&#x30EC;&#x30A4;&#x30E4;&#x30FC;&#x3064;&#x3051;&#x3066;&#x901F;&#x3055;&#x5909;&#x3048;&#x305F;&#x308A;&#x6B62;&#x3081;&#x305F;&#x308A;&#x3067;&#x304D;&#x308B;&#x3068;&#x601D;&#x3063;&#x305F;&#x3002;<br>\n&#x3067;&#x3082; IE9 &#x3067;&#x4F7F;&#x3048;&#x306A;&#x304B;&#x3063;&#x305F;&#x3002;","libraries":[],"js":{"language":"js","content":"// forked from svggirl's \"ShuffleColorFilter\" http://jsdo.it/svggirl/svg_sample_filter\n/*\nIE9 で動きません。\n音楽は一切操作できないので #skip_all のほうがいいか。\n(http://jsdo.it/event/svggirl/filter/xl1/bUHw#skip_all)\n背景のスクロールは一時停止しません。\n*/\n\nif (typeof filter === 'undefined') {\n    var filter = {};\n}\nfilter.complete = function(){\n  var origin_player = 'http://jsrun.it';\n  var player = '../data/tIDC.html';\n  \n  var _9_svg_play_svg   = _9.svg.play_svg;\n  var _9_svg_end        = _9.svg.end;\n  var _9_svg_show_frame = _9.svg.show_frame;\n  \n  var style = '\\._xl1_label{position:absolute;left:0;top:40%;width:100%;height:auto;background:rgba(0,0,0,.8);text-align:center;font-size:30px;line-height:50px;color:white;}._xl1_button{display:inline-block;width:20%;height:50px;margin:0 10px;background:#bbc;}._xl1_button:hover{color:#234;cursor:pointer;}';\n  \n  _9.svg.play_svg = function(){\n    var args = arguments;\n    var styleElem = $('<style>').text(style).appendTo('body');\n    var yesButton = $('<div class=\"_xl1_button\">')\n      .text('Yes')\n      .click(showPlayer);\n    var noButton = $('<div class=\"_xl1_button\">')\n      .text('No')\n      .click(playNormal);\n    var dialog = $('<div class=\"_xl1_label\">')\n      .text('Show player?')\n      .append(yesButton)\n      .append(noButton)\n      .appendTo('body');\n      \n    function showPlayer(){\n      styleElem.remove();\n      dialog.remove();\n      \n      var playerWin = open(player, '',\n        'width=380,height=100,menubar=no,toolbar=no');\n      window.addEventListener('message', listenPlayer, false);\n      setTimeout(syncFrames, 1000);\n      _9.svg.end = function(){\n        playerWin.close();\n        window.removeEventListener('message', listenPlayer, false);\n        _9_svg_end.apply(this, arguments);\n      };\n      _9_svg_play_svg.apply(this, args);\n      _9.svg.pause();\n      \n      function syncFrames(){\n        if(playerWin.opener === window){\n          playerWin.postMessage(\n            '_xl1_syncFrames_' + _9.svg.position, origin_player);\n          setTimeout(syncFrames, 1000);\n        }\n      }\n    }\n    function playNormal(){\n      styleElem.remove();\n      dialog.remove();\n      _9_svg_play_svg.apply(this, args);\n    }\n  };\n  function listenPlayer(e){\n    if(e.origin !== origin_player) return;\n    var data = e.data.split('_');\n    switch(data[3]){\n      case 'play':\n        if(!_9.svg.timer){\n          _9.svg.timer = setTimeout(_9.svg.show_frame);\n        } else {\n          _9.svg.show_frame = _9_svg_show_frame;\n        }\n        break;\n      case 'pause':\n        _9.svg.show_frame = function(){\n          setTimeout(_9.svg.show_frame, 50);\n        };\n        break;\n      case 'changeFps':\n        config.fps = (data[4] |0) || config.fps;\n        break;\n    }\n  }\n};"},"html":{"language":"html","content":"<div id=\"ext\"></div>\n<div id=\"svg\"></div>\n<script src=\"http://ajax.microsoft.com/ajax/jquery/jquery-1.5.2.min.js\"></script>\n<script src=\"http://jsdo.it/event/svggirl/js/config.js\"></script>\n<script src=\"http://jsdo.it/event/svggirl/js/9.js\"></script>\n<script src=\"http://jsdo.it/event/svggirl/js/preview.js\"></script>\n<script src=\"http://jsdo.it/event/svggirl/js/svg.js\"></script>\n\n"},"css":{"language":"css","content":"html, body {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n}\n\nhtml {\n  background-color: #fff;\n}\n\n#svg, #ext {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n#ext div {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n#ext div:first-child {\n  display: block;\n}\n\n#svg_143_157_3_tower_svgz {\n  z-index: 0 !important;\n}\n\ndiv {\n  width: 100%;\n  height: 100%;\n}\n\nsvg {\n  width: 100%;\n  height: 100%;\n  vertical-align: middle;\n}\n\n\n\n\n"},"published":"2011-05-05T19:01:18"}