{"name":"1Ua1","title":"字幕つける","description":"TextTrack<br>\n<br>\n<a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#timed-text-tracks\">http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#timed-text-tracks</a><br>\n<br>\nChrome dev &#x3067; &lt;track&gt; &#x8981;&#x7D20;&#x3092;&#x6709;&#x52B9;&#x306B;&#x3059;&#x308B;&#x3068;&#x52D5;&#x3044;&#x305F;","libraries":[],"js":{"language":"js","content":"var video = $('video'),\n    textList = $('textList'),\n    track = video.addTextTrack('subtitles');\n\ninit();    \n\nfunction init(){\n  track.mode = TextTrack.SHOWING;\n  setVideo();\n\n  textList.addEventListener('focus', resetText, false);\n  $('setVideoButton').addEventListener('click', setVideo, false);\n  $('addTextButton').addEventListener('click', addText, false);\n}\n\nfunction setVideo(){\n  video.src = $('sourceURL').value;\n  resetText();\n}\n\nfunction addText(){\n  var id = (track.cues || []).length,\n      start = video.currentTime - 0.05,\n      end = start + 1,\n      list = textList.querySelectorAll('li')[id]\n  if(!list) return;\n  if(start < 0) start = 0;\n  list.className = 'added';\n  track.addCue(new TextTrackCue(id, start, end, list.textContent));\n}\n\nfunction resetText(){\n  var lists = textList.querySelectorAll('li');\n  for(var i = lists.length; i--;){\n    lists[i].className = '';\n  }\n  for(var i = track.cues.length; i--;){\n    track.removeCue(track.cues[i]);\n  }\n}\n\nfunction $(id){\n  return document.getElementById(id);\n}"},"html":{"language":"html","content":"<div>\n    Video URL: <input id=\"sourceURL\" value=\"../assets/trailer.webm\">\n  <button id=\"setVideoButton\"> OK </button>\n</div>\n<div>\n  <video id=\"video\" height=\"200\" controls></video>\n</div>\n<div>\n  <button id=\"addTextButton\"> 字幕追加 </button>\n  <ol id=\"textList\" contentEditable>\n    <li>いち</li>\n    <li>にー</li>\n    <li>さん</li>\n    <li>しー</li>\n    <li>ごー</li>\n    <li>るぉく</li>\n    <li>なな</li>\n    <li>はちー</li>\n    <li>きゅー</li>\n  </ol>\n</div>"},"css":{"language":"css","content":"#sourceURL {\n  width: 300px;\n  font-family: consolas, monospace;\n}\n#textList {\n  background: #ff9;\n  border: 1px dashed #9a9;\n  font-family: consolas, monospace;\n}\n#textList .added {\n  color: #ccc;\n}"},"published":"2012-03-02T14:21:12"}