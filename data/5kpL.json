{"name":"5kpL","title":"WebGL と SVG filter でディザかけるやつ","description":"<div class=\"markdown\"><p>Chrome &#x3067;&#x306F;&#x3046;&#x307E;&#x304F;&#x3044;&#x304F;&#x2026;&#x2026;</p>\n\n<p>SVG &#x7248;&#x306B;&#x3064;&#x3044;&#x3066;&#x306F; <a href=\"http://jsdo.it/xl1/k3g1\">http://jsdo.it/xl1/k3g1</a> &#x3082;&#x53C2;&#x7167;&#x3057;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;</p>\n\n<h3>2012/10/19</h3>\n\n<p>&#x540C;&#x3058;&#x8A08;&#x7B97;&#x3092;&#x3057;&#x3066;&#x308B;&#x3068;&#x601D;&#x3046;&#x3093;&#x3060;&#x3051;&#x3069;&#x7D50;&#x679C;&#x304C;&#x9055;&#x3046;&#x3001;&#x306A;&#x306B;&#x304B;&#x304C;&#x307E;&#x3061;&#x304C;&#x3063;&#x3066;&#x3044;&#x308B;&#xFF08;SVG Filter &#x306E;&#x30D0;&#x30B0;&#x304B;&#x3082;&#x3057;&#x308C;&#x306A;&#x3044;&#x3051;&#x3069; SVG &#x306E;&#x307B;&#x3046;&#x304C;&#x3046;&#x307E;&#x304F;&#x63CF;&#x753B;&#x3067;&#x304D;&#x3066;&#x308B;&#x3088;&#x3046;&#x306B;&#x898B;&#x3048;&#x308B;&#x306E;&#x3067;&#x3069;&#x3046;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x306E;&#x304B;&#x77E5;&#x308A;&#x305F;&#x3044;&#xFF09;</p>\n\n<h3>2012/11/13</h3>\n\n<p>MicroGL &#x306B;&#x975E;&#x4E92;&#x63DB;&#x306A;&#x5909;&#x66F4;&#x3092;&#x52A0;&#x3048;&#x305F;&#x306E;&#x3067;&#x4ECA;&#x5F8C;&#x306F; <a href=\"https://github.com/xl1/microgl/\">https://github.com/xl1/microgl/</a> &#x304B;&#x3089;&#x8AAD;&#x3080;&#x3053;&#x3068;&#x306B;&#x3057;&#x305F;\nWebGL &#x306E;&#x307B;&#x3046;&#x304C;&#x660E;&#x308B;&#x304F;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x539F;&#x56E0;&#x306F;&#x307E;&#x3060;&#x308F;&#x304B;&#x3089;&#x306A;&#x3044;</p>\n\n<h3>2013/03/18</h3>\n\n<p>raw.github.com &#x304B;&#x3089;&#x8AAD;&#x3081;&#x306A;&#x304F;&#x306A;&#x3063;&#x3066;&#x305F;&#x306E;&#x3067;&#x76F4;&#x3057;&#x305F;</p>\n</div>","libraries":["/xl1/eHqL"],"js":{"language":"coffeescript","content":"#! coffeescript \n# forked from xl1's \"SVG filter でディザかけるやつ\" http://jsdo.it/xl1/k3g1\n\ngl = new MicroGL()\ngl.init document.getElementById('webgl')\ngl.program document.getElementById('vshader').textContent, document.getElementById('fshader').textContent\ngl.bindVars {\n    uSampler: '../assets/cwJhh.jpg'\n    uTexSize: [256, 256]\n    aPosition: [-1, -1, -1, 1, 1, -1, 1, 1]\n}\ngl.draw()"},"html":{"language":"html","content":"<!-- webgl shaders -->\n<script type=\"text/x-vertex-shader\" id=\"vshader\">\nattribute vec2 aPosition;\n\nvoid main(){\n  gl_Position = vec4(aPosition, 0.0, 1.0);\n}\n</script>\n<script type=\"text/x-fragment-shader\" id=\"fshader\">\nprecision mediump float;\n\nuniform vec2 uTexSize;\nuniform sampler2D uSampler;\n\nvec4 getColor(vec2 position){\n  return texture2D(uSampler, (gl_FragCoord.xy + position) / uTexSize);\n}\n\nvec4 getFinalColor(){\n  float p = floor(mod(gl_FragCoord.x, 4.0));\n  float q = floor(mod(p - gl_FragCoord.y, 4.0));\n  float threshold = (\n    8.0 * mod(q, 2.0) +\n    4.0 * mod(p, 2.0) +\n    2.0 * floor(q / 2.0) +\n    floor(p / 2.0) +\n    0.5\n  ) / 16.0;\n  \n  vec3 color = getColor(vec2(0.0)).rgb;\n  return vec4(step(threshold, color), 1.0);\n}\n\nvoid main(){\n  gl_FragColor = getFinalColor();\n}\n</script>\n\nWebGL 版:\n<div id=\"webgl\"></div>\n\nSVG Filter 版:\n<svg id=\"svgfilter\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" height=\"256\">\n<defs>\n  <filter id=\"orderedDither\" filterUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"256\" height=\"256\">\n    <feImage xlink:href=\"data:image/gif;base64,R0lGODlhBAAEALMAAAgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+CwAAAAABAAEAAAEDBAgoRhxZqyQ3mlFBAA7\" result=\"thresholdUnit\" width=\"4\" height=\"4\"/>\n    <feTile in=\"thresholdUnit\" result=\"threshold\"/>\n    \n    <feComposite operator=\"arithmetic\" k1=\"0\" k2=\"1\" k3=\".5\" k4=\"0\" in=\"SourceGraphic\" in2=\"threshold\" result=\"sieved\"/>\n    <feComponentTransfer in=\"sieved\">\n      <feFuncR type=\"discrete\" tableValues=\"0 1\"/>\n      <feFuncG type=\"discrete\" tableValues=\"0 1\"/>\n      <feFuncB type=\"discrete\" tableValues=\"0 1\"/>\n      <feFuncA type=\"linear\" slope=\"1\"/>\n    </feComponentTransfer>\n  </filter>\n</defs>\n<image filter=\"url(#orderedDither)\" xlink:href=\"../assets/cwJhh.jpg\" width=\"256\" height=\"256\"/>\n</svg>"},"css":{"language":"css","content":""},"published":"2013-03-18T19:29:07"}