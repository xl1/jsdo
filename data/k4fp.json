{"name":"k4fp","title":"Pure CSS Scrolling Effect","description":"<div class=\"markdown\"><p><a href=\"http://www.adventar.org/calendars/2\">CSS Programming Advent Calendar 2012</a> &#x306E; 14 &#x65E5;&#x76EE; <a href=\"https://gist.github.com/4281393\">https://gist.github.com/4281393</a></p>\n\n<ul>\n<li><a href=\"./data/k4fp.html\"><strong>&#x30D5;&#x30EB;&#x30B9;&#x30AF;&#x30EA;&#x30FC;&#x30F3;&#x306E;&#x307F;&#x5BFE;&#x5FDC;</strong></a></li>\n<li><code>about:flags</code> &#x3067;&#x300C;&#x8A66;&#x9A13;&#x904B;&#x7528;&#x7248;&#x306E; WebKit &#x6A5F;&#x80FD;&#x3092;&#x6709;&#x52B9;&#x306B;&#x3059;&#x308B;&#x300D;&#x3092;&#x30AA;&#x30F3;&#x306B;&#x3059;&#x308B;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308A;&#x307E;&#x3059;</li>\n</ul>\n\n<h3>2013/01/24 &#x66F4;&#x65B0;</h3>\n\n<p>unprefixed linear-gradient &#x306E;&#x6587;&#x6CD5;&#x9593;&#x9055;&#x3063;&#x3066;&#x305F;&#x306E;&#x3067;&#x76F4;&#x3057;&#x305F;</p>\n\n<h3>2013/06/15 &#x66F4;&#x65B0;</h3>\n\n<p>translate -&gt; translate3d &#x306B;&#x3059;&#x308B;&#x3068;&#x30EC;&#x30A4;&#x30E4;&#x30FC;&#x304C;&#x5207;&#x3089;&#x308C;&#x308B;&#x306E;&#x3067;&#x63CF;&#x753B;&#x304C;&#x5C11;&#x306A;&#x304F;&#x3066;&#x6E08;&#x3080;</p>\n</div>","libraries":[],"js":{"language":"js","content":""},"html":{"language":"html","content":"<link href='http://fonts.googleapis.com/css?family=Geo' rel='stylesheet' type='text/css'>\n\n<input type=\"checkbox\" id=\"show-outline\">\n\n<div id=\"container\">\n  <!-- これらは普通にスクロール -->\n  <section id=\"title\">\n    <h1>Pure CSS Scrolling Effect</h1>\n    <ol id=\"scroll-suggest\">\n      <li><a href=\"http://www.adventar.org/calendars/2\">CSS Programming Advent Calendar 2012</a> Day 14</li>\n      <li>works on: Chrome 23+</li>\n    </ol>\n  </section>\n  <section id=\"intro\" class=\"paper\">\n    <h1>Scrolling Effect ?</h1>\n    <ul>\n      <li><a href=\"http://design.kayac.com/topics/2012/06/koukyuperaichi.php\">縦や横に長いサイト「高級ペライチ」1度は見ておきたいスクロール演出のまとめ32個！</a></li>\n      <li><a href=\"https://www.google.com/search?q=scrolling+effect\">scrolling effect - Google 検索</a></li>\n    </ul>\n    最近では\n    <ul>\n      <li><a href=\"http://special.jimin.jp/political_promise/\">自民党＜政権公約＞</a></li>\n    </ul>\n    →　<strong>それ、CSS でできるよ！</strong>\n  </section>\n  <section id=\"mixin\" class=\"paper\">\n    <h1>SCSS Mixins</h1>\n    <a href=\"https://gist.github.com/4277256\">sticker.scss</a>\n  </section>\n  <section id=\"code\" class=\"paper\">\n    <h1>これだけ</h1>\n    <pre><code>@import \"sticker.scss\";\n@include use-stickers($height);\n\n#your-favorite-element {\n  @include sticker($start, $velocity, $range);\n}</code></pre>\n  </section>\n\n  <section id=\"how\" class=\"paper\">\n    <h1>どうやってるの？</h1>\n    <ul>\n      <li>\n        Sticky Positioning\n        <div>\n          参照: <a href=\"http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit\">HTML5Rocks Updates</a>\n        </div>\n      </li>\n      <li>\n        <a href=\"http://www.w3.org/TR/css3-3d-transforms/\">CSS Transforms</a>\n      </li>\n    </ul>\n    <label for=\"show-outline\">sticker の位置を見えるようにする</label>\n  </section>\n  <section id=\"why\" class=\"paper\">\n    <h1>なぜ CSS で?</h1>\n    <ul>\n      <li>\n        <strong>軽い</strong><br>ロード時間ゼロ！ JS がない分軽い\n      </li>\n      <li>\n        <strong>速い</strong><br>スクロール遅延ゼロ！ ブラウザ側が処理してくれる\n      </li>\n      <li>\n        <strong>たのしい</strong><br>CSS でやる意味ゼロ！！\n      </li>\n    </ul>\n    <small>※ 効果には個人差・環境差があります</small>\n  </section>\n  <section id=\"more\" class=\"paper\">\n    <h1>もっと詳しく</h1>\n    <ul>\n      <li>\n        <a href=\"https://gist.github.com/4281393\">CSS でペライチ</a><br>\n        （<a href=\"http://www.adventar.org/calendars/2\">CSS Programming Advent Calendar 2012</a> の 14日目）\n      </li>\n      <li><a href=\"http://twitter.com/xl1blue\">@xl1blue on Twitter</a></li>\n    </ul>\n  </section>\n  <section id=\"end\">\n    <h1>END</h1>\n  </section>\n</div>\n\n<div id=\"stickers\">\n  <div class=\"sticker\" id=\"star1\"><div class=\"star\"></div></div>\n  <div class=\"sticker\" id=\"star2\"><div class=\"star\"></div></div>\n  <div class=\"sticker\" id=\"star3\"><div class=\"star\"></div></div>\n  <div class=\"sticker\" id=\"star4\"><div class=\"star\"></div></div>\n  <div class=\"sticker\" id=\"star5\"><div class=\"star\"></div></div>\n  <div class=\"sticker\" id=\"shootingstar\"><div class=\"star\"></div></div>\n  <div class=\"sticker\" id=\"moon\"><div></div></div>\n  <div class=\"sticker\" id=\"star1-balloon\">\n    <pre class=\"balloon\"><code>sticker(\n  $start: 300px 150px,\n  $velocity: 0 -0.06,\n  $range: 0.5 1\n)</code></pre>\n  </div>\n  <div class=\"sticker\" id=\"sunnysky\"><div></div></div>\n  <div class=\"sticker\" id=\"background-far\"><div></div></div>\n  <div class=\"sticker\" id=\"background-close\"><div></div></div>\n  <div class=\"sticker\" id=\"title-cloud-back\"><div></div></div>\n  <div class=\"sticker\" id=\"ufo\"><div></div></div>\n  <div class=\"sticker\" id=\"ufo-balloon\">\n    <pre class=\"balloon\"><code>sticker(\n  $start: -550px 200px,\n  $velocity: 0.95 0.55,\n  $range: 0.40 0.53\n)</code></pre>\n  </div>\n  <div class=\"sticker\" id=\"sled\"><div></div></div>\n  <div class=\"sticker\" id=\"sled-balloon\">\n    <pre class=\"balloon\"><code>sticker(\n  $start: -720px 250px,\n  $velocity: 0.1 0,\n  $range: 0.12 1\n)</code></pre>\n  </div>\n  <div class=\"sticker\" id=\"snow1\"><div class=\"snow\"></div></div>\n  <div class=\"sticker\" id=\"snow2\"><div class=\"snow\"></div></div>\n  <div class=\"sticker\" id=\"snow3\"><div class=\"snow\"></div></div>\n  <div class=\"sticker\" id=\"snow4\"><div class=\"snow\"></div></div>\n  <div class=\"sticker\" id=\"snow5\"><div class=\"snow\"></div></div>\n  <div class=\"sticker\" id=\"snow6\"><div class=\"snow\"></div></div>\n  <div class=\"sticker\" id=\"title-cloud-front\"><div></div></div>\n  <div class=\"sticker\" id=\"end-trees\"><div></div></div>\n</div>"},"css":{"language":"scss","content":"/* --- utils --- */\n\n$vendor-prefixes: -webkit- '';\n\n// add vendor prefixes\n@mixin vendor($list) {\n  @if length(nth($list, 1)) != 2 { $list: append((), $list); }\n  @each $l in $list {\n    $prop: nth($l, 1);\n    $value: nth($l, 2);\n    @each $p in $vendor-prefixes {\n      #{$p + $prop}: $value;\n    }\n  }\n}\n\n@mixin vendor-prop($prop, $value) {\n  @each $p in $vendor-prefixes {\n    #{$prop}: #{$p + $value};\n  }\n}\n\n@function step-gradient($size, $colors...) {\n  $last: 0;\n  $result: ();\n  @each $color in $colors {\n    $result: append($result, $color $last, comma);\n    $last: $last + $size;\n    $result: append($result, $color $last);\n  }\n  @return $result;\n}\n\n\n/* --- math --- */\n\n$PI: 3.14159265;\n\n@function sqrt($x) {\n  @if x == 0 { @return 0; }\n  $s: 1;\n  $t: 0;\n  @while $t != $s { $t: $s; $s: ($s + $x / $s) / 2; }\n  @return $s;\n}\n\n@function arctan($x) {\n  @if $x == 0 { @return 0rad; }\n  @if $x == 1/0 { @return 0.5rad * $PI; }\n  @if $x == -1/0 { @return -0.5rad * $PI; }\n  \n  $r: $x > 1 or $x < -1;\n  @if $r { $x: 1 / $x; }\n  $a: 0;\n  $i: 10;\n  @while $i >= 1 {\n    $a: $i * $i * $x * $x / (2 * $i + 1 + $a);\n    $i: $i - 1;\n  }\n  @if $r {\n    @return $x * ($PI / 2 / abs($x) - 1 / (1 + $a)) * 1rad;\n  } @else {\n    @return $x / (1 + $a) * 1rad;\n  }\n}\n\n\n/* --- sticker --- */\n\n$sticky-area: 100%;\n@mixin use-stickers($height){\n  $sticky-area: $height;\n  body {\n    margin: 0;\n    height: $height;\n    overflow-x: hidden;\n  }\n}\n\n%sticker {\n  float: left;\n  position: absolute;\n  left: 0;\n  top: 0;\n  @include vendor((transform-origin, 0 0));\n}\n\n@mixin sticker(\n  $start-x: 0, $start-y: 0,\n  $vel-x: 0, $vel-y: -1,\n  $range-from: 0, $range-to: 1,\n  // shorthands\n  $start: null, $velocity: null, $range: null\n){\n  @if $start != null { $start-x: nth($start, 1); $start-y: nth($start, 2);}\n  @if $velocity != null { $vel-x: nth($velocity, 1); $vel-y: nth($velocity, 2);}\n  @if $range != null { $range-from: nth($range, 1); $range-to: nth($range, 2);}\n\n  @extend %sticker;\n  > * {\n    @extend %sticker;\n  }\n\n  @if $vel-x == 0 and $vel-y == -1 {\n    // static\n    left: $start-x;\n    top: $start-y;\n  } @else {\n    $scale: sqrt($vel-x * $vel-x + ($vel-y + 1) * ($vel-y + 1));\n    $sinr: -$vel-x / $scale;\n    $cosr: ($vel-y + 1) / $scale;\n\n    $rotate: arctan($sinr / $cosr);\n\n    $range: $sticky-area * ($range-to - $range-from);\n    $width: abs($range * $sinr);\n    $height: abs($range * $cosr);\n\n    $trans-x: 0;\n    $trans-y: -$width * $sinr;\n    @if $sinr >= 0 and $cosr > 0 {\n      $trans-x: $height * $sinr;\n      $trans-y: 0;\n    } @else if $sinr > 0 and $cosr <= 0 {\n      $rotate: $rotate + $PI;\n      $trans-x: -$width * $cosr + $height * $sinr;\n      $trans-y: -$height * $cosr;\n    } @else if $sinr <= 0 and $cosr < 0 {\n      $rotate: $rotate - $PI;\n      $trans-x: -$width * $cosr;\n      $trans-y: -$width * $sinr - $height * $cosr;\n    }\n\n    // set styles\n    width: $width / $scale;\n    height: $height / $scale;\n    @include vendor(\n      (transform, translateY($sticky-area * $range-from)\n        translate3d($trans-x, $trans-y, 0) rotate($rotate) scale($scale))\n    );\n    > * {\n      @include vendor-prop(position, sticky);\n      @include vendor(\n        (transform, scale(1 / $scale) rotate(-$rotate)\n          translate3d(-$trans-x, -$trans-y, 0) translate($start-x, $start-y))\n      );\n    }\n  }\n}\n\n\n/* --- main --- */\n\n// colors\n$grass: #6c6;\n$green: #4a4;\n$sky: #9cf;\n$blue: #46a;\n$red: #f44;\n$tan: #ca4;\n$brown: #850;\n$cream: #fea;\n$white: #eee;\n$black: #000;\n\n// variables\n$title-height: 1000px;\n$section-height: 550px;\n$section-padding: 30px;\n$section-interval: 450px;\n$num-sections: 8;\n$global-height: $title-height + $num-sections * ($section-height + $section-interval);\n$global-width: 2000px;\n\n\n// stickers\n@include use-stickers($global-height);\n\n#stickers {\n  width: 100vw;\n  height: $global-height;\n  overflow: hidden;\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n#background-far {\n  @include sticker($start: 0 600px, $velocity: -0.15 0);\n  > div {\n    width: $global-height * 0.15 + $global-width;\n    height: 150px;\n  }\n}\n#background-close {\n  @include sticker($start: 0 750px, $velocity: -0.25 0);\n  > div {\n    width: $global-height * 0.25 + $global-width;\n    height: 350px;\n  }\n}\n\n#moon {\n  @include sticker($start: 380px 150px, $velocity: 0 0, $range-from: 0.55);\n  margin-left: 50vw;\n  > div {\n    width: 150px;\n    height: 150px;\n  }\n}\n#sled {\n  @include sticker($start: -720px 250px, $velocity: 0.1 0, $range: 0.12 1);\n  margin-left: 50vw;\n  > div {\n    width: 640px;\n    height: 256px;\n  }\n}\n#ufo {\n  @include sticker($start: -550px 200px, $velocity: 0.95 0.55, $range: 0.4 0.53);\n  margin-left: 50vw;\n  > div {\n    width: 128px;\n    height: 64px;\n  }\n}\n\n#title-cloud-front {\n  @include sticker($velocity: 0 -2);\n  > div {\n    width: 2500px;\n    height: 800px;\n  }\n}\n#title-cloud-back {\n  @include sticker;\n  > div {\n    width: 2500px;\n    height: 900px;\n  }\n}\n#sunnysky {\n  @include sticker;\n  > div {\n    width: 2500px;\n    height: 4500px;\n  }\n}\n#end-trees {\n  @include sticker($start: 0 15900px, $vel-y: -2);\n  > div {\n    width: 2500px;\n    height: 1200px;\n  }\n}\n\n#snow1 {\n  @include sticker($start: -500px -1300px, $velocity: 0.2 0.7);\n  margin-left: 80vw;\n  font-size: 200px;\n}\n#snow2 {\n  @include sticker($start: 700px 200px, $velocity: 0.4 0.9);\n  font-size: 300px;\n}\n#snow3 {\n  @include sticker($start: 100px -200px, $velocity: 0.3 0.8);\n  font-size: 250px;\n}\n#snow4 {\n  @include sticker($start: -400px -600px, $velocity: 0.3 0.9);\n  margin-left: 80vw;\n  font-size: 220px;\n}\n#snow5 {\n  @include sticker($start: 600px -900px, $velocity: 0.1 0.9);\n  font-size: 200px;\n}\n#snow6 {\n  @include sticker($start: 200px -1200px, $velocity: 0.1 0.7);\n  font-size: 160px;\n}\n#star1 {\n  @include sticker($start: 300px 150px, $vel-y: -0.06, $range-from: 0.5);\n  font-size: 75px;\n}\n#star2 {\n  @include sticker($start: 200px 500px, $vel-y: -0.06, $range-from: 0.52);\n  font-size: 90px;\n}\n#star3 {\n  @include sticker($start: 500px 300px, $vel-y: -0.06, $range-from: 0.54);\n  font-size: 80px;\n}\n#star4 {\n  @include sticker($start: -300px 500px, $vel-y: -0.06, $range-from: 0.56);\n  margin-left: 100vw;\n  font-size: 90px;\n}\n#star5 {\n  @include sticker($start: -400px 100px, $vel-y: -0.06, $range-from: 0.58);\n  margin-left: 100vw;\n  font-size: 75px;\n}\n#shootingstar {\n  @include sticker($start: 5000px -4800px, $velocity: -0.8 0.8);\n  margin-left: 50vw;\n  font-size: 50px;\n}\n\n#sled-balloon {\n  @include sticker($start: -170px 200px, $velocity: 0.1 0, $range: 0.4 0.61);\n  margin-left: 50vw;\n}\n#ufo-balloon {\n  @include sticker($start: -340px 140px, $velocity: 0.95 0.55, $range: 0.41 0.535);\n  margin-left: 50vw;\n}\n#star1-balloon {\n  @include sticker($start: 400px 100px, $vel-y: -0.06, $range: 0.5 0.65);\n}\n\n#container {\n  position: relative;\n  z-index: 10;\n}\n\n\n// appearance\nbody {\n  font-size: 25px;\n  line-height: 1.7;\n  background: $blue;\n}\na:link, a:visited {\n  color: $blue;\n}\na:active {\n  color: $red;\n}\npre, code {\n  margin: 0;\n}\nol {\n  padding: 0;\n  list-style-type: none;\n}\n\nsection {\n  box-sizing: border-box;\n  margin: 0 auto $section-interval;\n  padding: 30px;\n  h1 {\n    font-size: 2em;\n    line-height: 1;\n    text-align: center;\n  }\n}\n\n.paper {\n  width: 800px;\n  height: $section-height;\n  background-color: $white;\n  border-bottom: 10px solid $red;\n  pre {\n    background: $cream;\n    border: 1px solid $tan;\n    padding: 20px;\n  }\n}\n\n#title {\n  height: $title-height;\n  text-align: center;\n  h1 {\n    font-family: Geo, cursive;\n    font-size: 128px;\n    color: $red;\n    text-shadow: 0 3px $cream, 0 6px $green;\n    width: 500px;\n    margin: 50px auto 20px auto;\n  }\n}\n#mixin {\n  text-align: center;\n  a {\n    font-size: 3em;\n  }\n}\n#code {\n  margin-bottom: $section-height + 2 * $section-interval;\n}\n#end {\n  width: 500px;\n  height: 500px;\n  border-radius: 50%;\n  background: $white;\n  h1 {\n    font-family: Geo, cursive;\n    font-size: 160px;\n    color: $red;\n    text-shadow: 0 6px $cream;\n  }\n}\n\n#scroll-suggest::after {\n  display: block;\n  content: '\\226b';\n  @include vendor((transform, rotate(90deg) scale(2)))\n}\n\n\n// stickers appearance\n#background-far > div {\n  background-image: url('../assets/bXEGa');\n}\n#background-close > div {\n  background-size: 1000px 350px;\n  background-position: 0, 1000px, 2000px, 3000px;\n  background-image:\n    -webkit-linear-gradient(left, step-gradient(20%,\n      $green, $grass, $green, $grass, $green)),\n    -webkit-linear-gradient(left, step-gradient(20%,\n      $tan, $grass, $green, $tan, $brown)),\n    -webkit-linear-gradient(left, step-gradient(20%,\n      $green, $tan, $green, $brown, $tan)),\n    -webkit-linear-gradient(left, step-gradient(20%,\n      $brown, $tan, $brown, $tan, $brown));\n  background-image:\n    linear-gradient(left, step-gradient(20%,\n      $green, $grass, $green, $grass, $green)),\n    linear-gradient(left, step-gradient(20%,\n      $tan, $grass, $green, $tan, $brown)),\n    linear-gradient(left, step-gradient(20%,\n      $green, $tan, $green, $brown, $tan)),\n    linear-gradient(left, step-gradient(20%,\n      $brown, $tan, $brown, $tan, $brown));\n  background-repeat: no-repeat;\n}\n\n#moon > div {\n  background: $cream;\n  border-radius: 100%;\n}\n#sled > div {\n  background-image: url('../assets/nam3U');\n  background-size: 640px 512px;\n  @include vendor(\n    (animation, sled 1s steps(2) infinite)\n  );\n}\n#ufo > div {\n  background-image: url('../assets/iVRLn');\n  background-size: 128px 144px;\n  @include vendor(\n    (animation, ufo 1s steps(2) infinite)\n  );\n}\n\n.balloon {\n  font-size: 16px;\n  line-height: 1.2;\n  width: 220px;\n  padding: 10px;\n  background: $cream;\n\n  &::before {\n    content: '';\n    background: $cream;\n    width: 25px;\n    height: 25px;\n    position: absolute;\n    z-index: -1;\n    bottom: 0;\n\n    left: -25px;\n    @include vendor(\n      (transform-origin, 100% 100%)\n      (transform, skewX(-45deg))\n    );\n  }\n}\n.snow {\n  opacity: 0.8;\n  color: $white;\n  text-shadow: 3px 0 $blue, -3px 0 $blue, 0 3px $blue, 0 -3px $blue;\n  &::before {\n    content: '\\2744';\n  }\n}\n.star {\n  color: $cream;\n  &::before {\n    content: '\\2605';\n  }\n}\n\n@mixin title-cloud($base-color) {\n  background-size: 200px 100%;\n  background-image: -webkit-linear-gradient(110deg,\n    transparent, transparent 100px, $base-color 100px, $base-color);\n  background-image: linear-gradient(-20deg,\n    transparent, transparent 100px, $base-color 100px, $base-color);\n}\n#title-cloud-front > div {\n  @include title-cloud($white);\n  border-top: 10px solid $red;\n}\n#title-cloud-back > div {\n  @include title-cloud($cream);\n  background-position: 100px;\n}\n#sunnysky > div {\n  $base-color: $sky;\n  background-size: 10px 4000px, 200px 500px;\n  background-position-y: 0, 4000px;\n  background-repeat: repeat-x;\n  background-image:\n    -webkit-linear-gradient($base-color, $base-color),\n    -webkit-linear-gradient(110deg,\n      transparent, transparent 100px, $base-color 100px, $base-color);\n  background-image:\n    linear-gradient($base-color, $base-color),\n    linear-gradient(-20deg,\n      transparent, transparent 100px, $base-color 100px, $base-color);\n}\n#end-trees > div {\n  background-size: 200px 100%;\n  background-image: -webkit-linear-gradient(\n    290deg, transparent, transparent 100px,\n    $grass 100px, $grass 110px, $green 110px, $green\n  );\n  background-image: linear-gradient(\n    -200deg, transparent, transparent 100px,\n    $grass 100px, $grass 110px, $green 110px, $green\n  );\n}\n\n// animations\n@-webkit-keyframes ufo {\n  from { background-position-y: 0; }\n  to   { background-position-y: 128px; }\n}\n@-webkit-keyframes sled {\n  from { background-position-y: 0; }\n  to   { background-position-y: 512px; }\n}\n\n\n// showing outline\nbody > input {\n  display: none;\n}\nlabel[for=\"show-outline\"] {\n  color: $blue;\n  text-decoration: underline;\n  &:hover {\n    cursor: pointer;\n  }\n  #show-outline:checked ~* & {\n    background: $red;\n  }\n}\n#show-outline:checked ~ #stickers * {\n  outline: 1px solid rgba(255, 255, 255, 0.6);\n}"},"published":"2013-06-15T18:04:45"}