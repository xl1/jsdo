{"name":"tIDC","title":"(player window)","description":"&#x547C;&#x3073;&#x51FA;&#x3057;&#x3066;&#x4F7F;&#x3046;&#x3002;","libraries":["/lib/jquery-1.5.2.min"],"js":{"language":"js","content":"$(function(){\n\nvar origin_svg = 'http://d37seacpprxfy8.cloudfront.net';\nvar origin = 'http://jsrun.it';\n\nvar playing = false;\nvar fps = 10;\nvar frames = 0;\nvar timer = null;\n\n$('#playbutton').click(play);\n$('#fastbutton').click(function(){ changeFps(fps+1); });\n$('#slowbutton').click(function(){ changeFps(fps-1); });\nwindow.addEventListener('message', syncFrames, false);\n\nfunction syncFrames(e){\n  if(e.origin !== origin_svg) return;\n  var res = /^_xl1_syncFrames_(\\d+)$/.exec(e.data);\n  if(res) frames = res[1] |0;\n}\n\nfunction play(){\n  if(playing = !playing){\n    timer = setTimeout(proceed);\n    $('#playbutton').html('&#x258c;&#x2590;').css('font-size', '40px');\n    postState('play');\n  } else {\n    clearTimeout(timer);\n    $('#playbutton').html('&#x25ba;').css('font-size', '72px');\n    postState('pause');\n  }\n}\nfunction changeFps(newFps){\n  if(0 < newFps && newFps <= 20) fps = newFps;\n  $('#fpscounter').text(padZero(fps, 2));\n  postState('changeFps_' + fps);\n}\nfunction postState(state){\n  var message = ['', 'xl1', 'state', state].join('_');\n  window.opener.postMessage(message, origin_svg);\n  // ここで IE9「インターフェースがサポートされていません。」エラー\n}\nfunction proceed(){\n  frames++;\n  $('#framecounter').text(padZero(frames, 4));\n  if(playing) timer = setTimeout(proceed, 1000 / fps);\n}\n\nfunction padZero(num, digit){\n  return ((new Array(digit)).join('0') + num).slice(-digit);\n}\n\n});"},"html":{"language":"html","content":"<div id=\"playbutton\" class=\"button\">&#x25ba;<!--&#x258c;&#x2590;--></div>\n<div id=\"fps\"><div id=\"fpscounter\">10</div>FPS</div>\n<div>\n  <span id=\"fastbutton\" class=\"button\"> + </span><br>\n  <span id=\"slowbutton\" class=\"button\"> - </span>\n</div>\n<div id=\"frame\"><div id=\"framecounter\">0000</div>Frames</div>"},"css":{"language":"css","content":"body {\n  margin: 0;\n  background: #bbc;\n  color: #fff;\n  text-align: center;\n  font-family: consolas, Monaco, monospace;\n  font-size: 20px;\n  width: 400px;\n  overflow: hidden;\n}\nbody > div {\n  float: left;\n  height: 999px;\n}\n#fps, #frame {\n  border-left: 1px solid #fff;\n  padding: 0 8px;\n}\n#fpscounter, #framecounter {\n  font-size: 60px;\n}\n.button:hover {\n  color: #234;\n  cursor: pointer;\n}\n#fastbutton, #slowbutton {\n  display: inline-block;\n  width: 30px;\n  height: 49px;\n  line-height: 49px;\n}\n#playbutton {\n  width: 100px;\n  font-size: 72px;\n  line-height: 100px;\n}"},"published":"2011-05-02T23:43:22"}