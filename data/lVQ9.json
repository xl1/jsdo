{"name":"lVQ9","title":"ページめくり","description":"<div class=\"markdown\"><p><a href=\"http://www.adventar.org/calendars/2\">CSS Programming Advent Calendar 2012</a> &#x306E; 18 &#x65E5;&#x76EE; <a href=\"https://gist.github.com/4326998\">https://gist.github.com/4326998</a></p>\n\n<p>about:flags &#x3067;&#x300C;&#x8A66;&#x9A13;&#x904B;&#x7528;&#x7248;&#x306E; WebKit &#x6A5F;&#x80FD;&#x3092;&#x6709;&#x52B9;&#x306B;&#x3059;&#x308B;&#x300D;&#x3092;&#x30AA;&#x30F3;&#x306B;&#x3057;&#x305F; Chrome &#x3067;</p>\n</div>","libraries":[],"js":{"language":"js","content":""},"html":{"language":"html","content":"<input type=\"radio\" name=\"onpage\" id=\"onpage1\" checked>\n<input type=\"radio\" name=\"onpage\" id=\"onpage3\">\n<input type=\"radio\" name=\"onpage\" id=\"onpage5\">\n\n<div id=\"content\">\n  <section>\n    <h1>ページめくり</h1>\n    <p>\n      Chrome のみ対応。\n      かつ about:flags で「試験運用版の WebKit 機能を有効にする」をオンにする必要があります。\n    </p>\n    <label class=\"next\" for=\"onpage3\">&gt;&gt;</label>\n  </section>\n  <section>\n    <p>\n      CSS Regions で要素を半分に切って、別々に Transform させています。\n      このくらいなら <a href=\"http://html.adobe.com/webstandards/csscustomfilters/\">Custom Filters</a> を使わなくても可能。\n    </p>\n    <label class=\"prev\" for=\"onpage1\">&lt;&lt;</label>\n    <label class=\"next\" for=\"onpage5\">&gt;&gt;</label>\n  </section>\n  <section>\n    <p>\n      たとえば video も切断できる\n      <video src=\"../assets/trailer.webm\" controls width=\"420\">\n    </p>\n    <label class=\"prev\" for=\"onpage3\">&lt;&lt;</label>\n  </section>\n</div>\n\n<div id=\"book\">\n  <div id=\"page1\" class=\"page\"></div>\n  <div id=\"page3\" class=\"page\"></div>\n  <div id=\"page5\" class=\"page\"></div>\n  <div id=\"page6\" class=\"page\"></div>\n  <div id=\"page4\" class=\"page\"></div>\n  <div id=\"page2\" class=\"page\"></div>\n</div>"},"css":{"language":"scss","content":"// vendor-prefix list\n$vendor-prefixes: '-webkit-' '';\n\n// add vendor prefixes\n@mixin vendor($list) {\n  @if length(nth($list, 1)) != 2 { $list: append((), $list); }\n  @each $l in $list {\n    $prop: nth($l, 1);\n    $value: nth($l, 2);\n    @each $p in $vendor-prefixes {\n      #{$p + $prop}: $value;\n    }\n  }\n}\n\n\n// main\n\n$page-width: 220px;\n$page-height: 350px;\n\nbody {\n  background-color: gray;\n  @include vendor(\n    (perspective, 600px)\n  );\n\n  * {\n    box-sizing: border-box;\n  }\n  input {\n    display: none;\n  }\n}\n\n#content {\n  position: relative;\n  font-size: 20px;\n  line-height: 1.7;\n\n  section {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: $page-width * 2;\n    height: $page-height;\n    padding: 15px;\n    @include vendor(\n      (transform-origin, 0 0)\n      (transform, translateX($page-height) rotate(90deg))\n    );\n  }\n}\n\nlabel {\n  position: absolute;\n  bottom: 0;\n  &.next {\n    right: 0;\n  }\n  &.prev {\n    left: 0;\n  }\n  &:hover {\n    cursor: pointer;\n    color: #f44;\n  }\n}\n\n#book {\n  position: relative;\n  width: $page-width * 2;\n  height: $page-height;\n  margin: 30px auto 0;\n  @include vendor(\n    (perspective, 600px)\n    (transform, rotateX(5deg))\n  );\n}\n\n.page {\n  position: absolute;\n  top: 0;\n  display: block;\n  width: $page-height;\n  height: $page-width;\n  background-color: white;\n  @include vendor(\n    (transform-origin, 0 0)\n    (transition, all 700ms ease-out)\n    (backface-visibility, hidden)\n  );\n}\n#page1, #page3, #page5 {\n  left: 0;\n  @include vendor(\n    (transform, translateX($page-width) rotateY(0) translateX(-$page-width) rotate(-90deg) translateX(-$page-height))\n  );\n}\n#page2, #page4, #page6 {\n  left: $page-width;\n  @include vendor(\n    (transform, rotateY(0deg) rotate(-90deg) translateX(-$page-height))\n  );\n}\n\n#onpage1:checked ~* #page3,\n#onpage1:checked ~* #page5,\n#onpage3:checked ~* #page5 {\n  @include vendor(\n    (transform, translateX($page-width) rotateY(180deg) translateX(-$page-width) rotate(-90deg) translateX(-$page-height))\n  );\n}\n#onpage3:checked ~* #page2,\n#onpage5:checked ~* #page2,\n#onpage5:checked ~* #page4 {\n  @include vendor(\n    (transform, rotateY(-180deg) rotate(-90deg) translateX(-$page-height))\n  );\n}\n\n@for $i from 1 through 3 {\n  $left-page: $i * 2 - 1;\n  $right-page: $i * 2;\n\n  #content section:nth-child(#{$i}) {\n    @include vendor((flow-into, flow + $i));\n  }\n  #page#{$left-page}, #page#{$right-page} {\n    @include vendor((flow-from, flow + $i));\n  }\n}"},"published":"2012-12-18T21:24:36"}