{"name":"1tAe","title":"compass","description":"","libraries":[],"js":{"language":"js","content":"(function(win, doc){\n\nvar width = win.innerWidth,\n    height = win.innerHeight,\n    size = Math.min(width, height),\n    canv = doc.getElementById('canv'),\n    ctx = canv.getContext('2d'),\n    compass = 0;\n\nwin.addEventListener('deviceorientation', getCompass, false);\ncanv.width = width;\ncanv.height = height;\nrender();\n\nfunction render(){\n  ctx.clearRect(0, 0, width, height);\n  ctx.save();\n  ctx.translate(width * 0.5, height * 0.5);\n  ctx.rotate(compass);\n  drawPath('red', [\n     0.0, -0.4,\n    -0.1,  0.0,\n     0.1,  0.0\n  ]);\n  drawPath('silver', [\n     0.0,  0.4,\n    -0.1,  0.0,\n     0.1,  0.0\n  ]);\n  ctx.restore();\n  \n  requestAnimationFrame(render);\n}\nfunction drawPath(style, nodes){\n  ctx.fillStyle = style;\n  ctx.beginPath();\n  ctx.moveTo(size * nodes[0], size * nodes[1]);\n  for(var i = 2, l = nodes.length; i < l; i += 2){\n    ctx.lineTo(size * nodes[i], size * nodes[i + 1]);\n  }\n  ctx.closePath();\n  ctx.fill();\n}\nfunction getCompass(e){\n  compass = e.alpha * Math.PI / 180;\n}\n\n})(window, document);"},"html":{"language":"html","content":"<canvas id=\"canv\"></canvas>"},"css":{"language":"css","content":"html, body {\n  margin: 0;\n  overflow: hidden;\n}"},"published":"2013-05-29T11:04:38"}