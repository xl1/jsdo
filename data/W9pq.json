{"name":"W9pq","title":"ShaderDSL.js デモ","description":"<div class=\"markdown\"><p><a href=\"http://typedarray.org/shaderdsl-js-javascript-based-dsls-for-gpu-shaders/\">ShaderDSL.js</a> &#x3092;&#x4F7F;&#x3046;&#x3068; JavaScript &#x306E; function &#x3092; WebGL &#x306E;&#x30B7;&#x30A7;&#x30FC;&#x30C0; (GLSL) &#x306B;&#x5909;&#x63DB;&#x3059;&#x308B;&#x3053;&#x3068;&#x304C;&#x3067;&#x304D;&#x308B;&#x3001;\nJavaScript &#x3060;&#x3051;&#x3067;&#x4E00;&#x8CAB;&#x3057;&#x3066;&#x30B7;&#x30A7;&#x30FC;&#x30C0;&#x307E;&#x3067;&#x66F8;&#x3051;&#x3066;&#x304A;&#x3082;&#x3057;&#x308D;&#x3044;</p>\n\n<p>&#x4E0A;&#x306E;&#x30DA;&#x30FC;&#x30B8;&#x3067;&#x306F; <a href=\"https://github.com/ttencate/gladder\">Gladder</a> &#x3068;&#x3044;&#x3046;&#x30E9;&#x30C3;&#x30D1;&#x30FC;&#x30E9;&#x30A4;&#x30D6;&#x30E9;&#x30EA;&#x3092;&#x4F7F;&#x3063;&#x3066;&#x3044;&#x308B;&#x3051;&#x308C;&#x3069;&#x3001;\n&#x62D9;&#x4F5C;&#x306E; <a href=\"https://github.com/xl1/microgl\">MicroGL</a> &#x3067;&#x3082; ShaderDSL &#x306B;&#x5BFE;&#x5FDC;&#x3057;&#x305F;&#x306E;&#x3067;&#x30C7;&#x30E2;</p>\n\n<ul>\n<li>&#xFF08;&#x73FE;&#x5728;&#x306E;&#x30D0;&#x30FC;&#x30B8;&#x30E7;&#x30F3;&#x3067;&#x306F;&#xFF09;console &#x306B; GLSL &#x306B;&#x5909;&#x63DB;&#x3055;&#x308C;&#x305F;&#x30B7;&#x30A7;&#x30FC;&#x30C0;&#x304C;&#x51FA;&#x529B;&#x3055;&#x308C;&#x308B;</li>\n<li>&#x639B;&#x3051;&#x7B97; <code>mat4.multiply(x, y, destination)</code> &#x306E;&#x66F8;&#x304D;&#x65B9;&#x3068;&#x304B;&#x306F;&#x3061;&#x3087;&#x3063;&#x3068;&#x3084;&#x3084;&#x3053;&#x3057;&#x3044;&#x3068;&#x601D;&#x3046;&#xFF08;&#x3053;&#x308C;&#x3067; <code>destination = x * y</code> &#x306E;&#x610F;&#x5473;&#xFF09;</li>\n<li>CoffeeScript &#x3067;&#x3082;&#x3082;&#x3061;&#x308D;&#x3093;&#x66F8;&#x3051;&#x308B;&#x3001;CoffeeScript &#x2192; JavaScript &#x2192; GLSL &#x3068; 2 &#x6BB5;&#x968E;&#x5909;&#x63DB;&#x3055;&#x308C;&#x308B;&#x3053;&#x3068;&#x306B;&#x306A;&#x308B;\n<ul>\n<li>&#x30B7;&#x30A7;&#x30FC;&#x30C0;&#x5185;&#x3067; gl_Position &#x306A;&#x3069;&#x3092; var &#x3057;&#x306A;&#x3044;&#x3088;&#x3046;&#x306B;&#x3001;&#x305D;&#x306E;&#x524D;&#x3067;&#x5BA3;&#x8A00;&#x3057;&#x3066;&#x304A;&#x304F;</li>\n<li>&#x30D5;&#x30E9;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30B7;&#x30A7;&#x30FC;&#x30C0;&#x3067;&#x306F;&#x5909;&#x306A;&#x5024;&#x3092;&#x8FD4;&#x3055;&#x306A;&#x3044;&#x3088;&#x3046;&#x306B;&#x660E;&#x793A;&#x7684;&#x306B; return &#x3059;&#x308B;&#xFF08;&#x9802;&#x70B9;&#x30B7;&#x30A7;&#x30FC;&#x30C0;&#x3067;&#x306F; varying &#x3092;&#x8FD4;&#x3059;&#xFF09;</li>\n</ul></li>\n</ul>\n</div>","libraries":["/xl1/eHqL"],"js":{"language":"coffeescript","content":"gl = new MicroGL()\nstartT = 0\n{ cos, sin } = Math\n\ngetShaders = ->\n    gl_Position = gl_FragColor = null\n    \n    vshader = (a, u) ->\n        pos = vec4.createFrom(a.position[0], a.position[1], 0, 1)\n        mat = u.modelView\n        mat4.multiply(u.perspective, mat, mat)\n        mat4.multiply(mat, pos, gl_Position)\n        texCoord: a.position\n        \n    fshader = (u, v) ->\n        gl_FragColor = texture2D.create(u.sampler, v.texCoord)\n        return # これがないとだめ\n    \n    uniforms =\n        modelView: 'mat4'\n        perspective: 'mat4'\n        sampler: 'sampler2D'\n    \n    attributes =\n        position: 'vec2'\n    \n    [vshader, fshader, uniforms, attributes]\n    \nupdate = ->\n    t = (Date.now() - startT) * 0.003\n    gl.bindVars(\n        modelView: [\n            cos(t), 0, -sin(t), 0\n            0, 1, 0, 0\n            sin(t), 0, cos(t), 0\n            0, -0.5, 3, 1\n        ]\n    )\n        .clear()\n        .draw()\n    requestAnimationFrame update\n    \nmain = ->\n    gl.init(document.body, 256, 256)\n        .program(getShaders()...)\n        .bindVars(\n            position: [0,0,0,1,1,0,1,1]\n            sampler: '../assets/sHjQC.jpg'\n            perspective: [2,0,0,0, 0,2,0,0, 0,0,1.01,1, 0,0,-1.01,0]\n        )\n    startT = Date.now()\n    update()\n        \nmain()\n"},"html":{"language":"html","content":"<script src=\"http://typedarray.org/wp-content/projects/shaderdsl-slides/ShaderDSL.js\"></script>"},"css":{"language":"css","content":""},"published":"2013-10-01T22:50:44"}